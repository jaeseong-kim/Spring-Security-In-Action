# 14장 OAuth2: 리소스 서버 구현

    리소스 서버는 클라이언트를 토큰으로 인증하고 필요한 리소스를 제공한다.
    클라이언트를 인증하는 방법에는 세 가지 방법이 있다.

## 권한 부여 서버 호출
    
    리소스 서버는 권한 부여 서버를 호출해 클라이언트가 보낸 토큰을 확인한다. 권한 부여 서버에 리소스 서버도
    클라이언트로 미리 등록되어 있어야 한다.

    1. 클라이언트는 oauth2로 통해 액세스 토큰을 발급받는다.
    2. 클라이언트는 리소스 서버에 토큰과 함께 요청을 보낸다.
    3. 리소스 서버는 권한 부여 서버에 /oauth/check_token?token=토큰값으로 요청을 보내 올바른 토큰인지 확인한다.
    4. 올바른 토큰인지 확인되면 리소스 서버는 권한 부여 서버로부터 사용자 정보를 얻는다.
    5. 리소스 서버는 클라이언트에게 요청에 대한 리소스를 제공한다.

## TokenStore 이용

    - 리소스 서버는 권한 부여 서버와 공유된 DB를 통해 클라이언트가 보낸 토큰을 인증한다.
    - 공유된 DB는 TokenStore 인터페이스를 이용해서 설정한다.
      TokenStore의 구현 객체는 InMemoryTokenStore, JdbcTokenStore가 있다.
      InMemoryTokenStore는 메모리에 토큰을 저장
      JdbcTokenStore는 DB에 토큰을 저장
    - DB에는 oauth_access_token, oauth_refresh_token으로 있어야 한다.


## 암호화 서명 이용

    리소스 서버는 JWT를 이용해 토큰의 서명이 맞는지 확인한다.
    